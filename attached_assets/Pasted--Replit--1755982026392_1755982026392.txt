Ù…Ø´Ú©Ù„ Ø§Ø² Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ù…Ø¹Ù„ÙˆÙ…Ù‡: Ø³Ø±ÙˆØ±Øª Ø±Ùˆ **Ù¾ÙˆØ±Øª ÛµÛ°Û°Û°** Ø¨Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ¢Ø¯ØŒ ÙˆÙ„ÛŒ Replit ÙÙ‚Ø· Ø³Ø±ÙˆÛŒØ³ÛŒ Ø±Ùˆ Ù†Ø´ÙˆÙ† Ù…ÛŒâ€ŒØ¯Ù‡ Ú©Ù‡ Ø±ÙˆÛŒ **`$PORT`** Ú¯ÙˆØ´ Ù…ÛŒâ€ŒØ¯Ù‡. Ø¨Ø±Ø§ÛŒ Ù‡Ù…ÛŒÙ† ÛŒÙ‡â€ŒØ¨Ø§Ø± Ø¯Ø±Ø³Øª Ù…ÛŒâ€ŒØ´Ù‡ØŒ Ø¨Ø¹Ø¯ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù…ÛŒâ€ŒØ±Ù‡ Ø±Ùˆ â€œexample domainâ€. Ø§ÛŒÙ† Ù¾Ø±Ø§Ù…Ù¾Øª Ø±Ùˆ Ù‡Ù…ÙˆÙ†â€ŒØ·ÙˆØ± Ú©Ù‡ Ù‡Ø³Øª Ø¨Ø¯Ù‡ Ø¨Ù‡ Replit AI ØªØ§ Ø³ÙØªâ€ŒÙˆØ³Ø®Øª ÙÛŒÚ©Ø³Ø´ Ú©Ù†Ù‡:

---

# ğŸ”§ Replit AI â€” Hard-Fix: Bind to `$PORT`, Single Public Listener

**Do NOT edit `vite.config.ts`.**
Only **one** public listener on **`0.0.0.0:$PORT`** (Uvicorn). React is served from `dist/`. All client API calls are **relative** (`/api/v1`).

## 1) Clean run command & bind to `$PORT`

* Open `.replit` and set:

```
run = "npm run dev"
```

* In `package.json`, overwrite scripts to:

```json
{
  "scripts": {
    "dev": "concurrently -k \"vite build --watch\" \"uvicorn app.main:app --host 0.0.0.0 --port $PORT\"",
    "build": "vite build",
    "preview": "vite preview --host --port $PORT"
  }
}
```

* ğŸ” Remove any other scripts that bind to 5000 (e.g. `"python3 -m http.server 5000"`).
* ğŸ” Replace every hardcoded `5000` in the repo:
  Run `grep -R "5000" -n .` and fix them to **`$PORT`** (ignore comments).

## 2) FastAPI must serve the whole `dist/` at `/`

Replace `app/main.py` with:

```py
import os
from fastapi import FastAPI
from fastapi.staticfiles import StaticFiles
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI()

@app.get("/api/v1/health")
def health():
    return {"ok": True}

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"], allow_methods=["*"], allow_headers=["*"],
)

# Serve SPA at root so /app-config.json and assets work
if os.path.isdir("dist"):
    app.mount("/", StaticFiles(directory="dist", html=True), name="spa")

# âš ï¸ Remove any manual catch-all (@app.get("/{path:path}")) you had before.
# The StaticFiles(html=True) already returns index.html for SPA routes.
```

## 3) Frontend runtime config (no localhost)

* Ensure `public/app-config.json`:

```json
{ "API_BASE": "/api/v1" }
```

* In code, **never** call `http://localhost:8000`. Use a single helper that prefixes `/api/v1`.

## 4) Build once and run

* In the Shell:

```
rm -rf dist
npm run build
```

* Press **Run** (which runs `npm run dev`):

  * You should see:

    * `vite ... build ... (watching)`
    * `Uvicorn running on http://0.0.0.0:$PORT`
* Open your Replit URL:

  * `/` â†’ loads React UI from `dist/`
  * `/api/v1/health` â†’ `{"ok": true}`

## 5) Sanity checks (debug if needed)

* Print the port: `echo PORT=$PORT` (must be non-empty).
* Check no one binds 5000: `grep -R "5000" -n .` should show nothing active.
* If you still get the example page, your Run command is not `npm run dev`. Re-open `.replit` and fix `run` exactly as above.

**Acceptance:** No â€œexample domainâ€, UI renders, `/app-config.json` serves JSON (not HTML), `/api/v1/health` is OK, and Uvicorn always logs `0.0.0.0:$PORT` (not 5000).

---

Ø§Ú¯Ø± Ù‡Ù…ÛŒÙ† Ø±Ùˆ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯ÛŒ Ùˆ Ø¨Ø§Ø² Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¨ÙˆØ¯ØŒ Ø®Ø±ÙˆØ¬ÛŒ `.replit`ØŒ Ù…Ø­ØªÙˆÛŒØ§Øª `package.json` ÙØ¹Ù„ÛŒ Ùˆ Ù†ØªÛŒØ¬Ù‡â€ŒÛŒ `grep -R "5000" -n .` Ø±Ùˆ Ø¨Ø¯Ù‡ ØªØ§ Ø¯Ù‚ÛŒÙ‚ Ù‡Ù…ÙˆÙ† ÙØ§ÛŒÙ„ Ø®Ø§Ø·ÛŒ Ø±Ùˆ Ù†Ø´ÙˆÙ†Ù‡ Ø¨Ú¯ÛŒØ±Ù….
