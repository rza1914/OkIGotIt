Ø§ÛŒÙ† Â«Ù¾Ø±Ø§Ù…Ù¾Øª Ø³ÙˆÙ¾Ø±â€ŒØ¯ÛŒâ€ŒØªÛŒÙ„Ø¯Â» Ø±Ùˆ Ø¹ÛŒÙ†Ø§Ù‹ Ø¨Ø¯Ù‡ Ø¨Ù‡ Replit AI ØªØ§ Ù…Ø´Ú©Ù„ Â«Ú©Ù„ÛŒÚ©â€ŒÙ‡Ø§ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ù† Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒÂ» Ú©Ø§Ù…Ù„ Ø­Ù„ Ø¨Ø´Ù‡. (Ù‚ÙˆØ§Ù†ÛŒÙ†: â—ï¸Ø¨Ù‡ `vite.config.ts` Ø¯Ø³Øª Ù†Ø²Ù†. Ø³Ø±ÙˆØ± Ù¾Ø§Ø¨Ù„ÛŒÚ© ÙÙ‚Ø· Ù‡Ù…ÙˆÙ† Uvicorn Ø±ÙˆÛŒ `0.0.0.0:$PORT` Ø¨Ù…ÙˆÙ†Ù‡. Ù‡Ù…Ù‡Ù” APIÙ‡Ø§ Ø¨Ø§ Ù…Ø³ÛŒØ± Ù†Ø³Ø¨ÛŒ `/api/v1` ØµØ¯Ø§ Ø²Ø¯Ù‡ Ø¨Ø´Ù†.)

---

# ğŸ§­ Replit AI â€” Fix SPA Navigation for iShop (React + FastAPI, RTL)

**Ø«Ø§Ø¨Øªâ€ŒÙ‡Ø§ (Ø¯Ø³Øª Ù†Ø²Ù†):**

* Backend Ù‡Ù…ÛŒÙ† Ø­Ø§Ù„Ø§ `dist/` Ø±Ùˆ Ø¯Ø± Ø±ÙˆØª Ø¨Ø§ `StaticFiles(html=True)` Ø³Ø±Ùˆ Ù…ÛŒâ€ŒÚ©Ù†Ù‡ â€” Ù†Ú¯Ù‡ Ø¯Ø§Ø±.
* Run Ø¨Ø§ÛŒØ¯ `npm run dev` Ø¨Ø§Ø´Ù‡ Ùˆ **ÙÙ‚Ø·** Uvicorn Ø±ÙˆÛŒ `$PORT` Ú¯ÙˆØ´ Ø¨Ø¯Ù‡.
* `public/app-config.json` = `{ "API_BASE": "/api/v1" }`.

## 1) Router Ø±Ø§ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ú©Ù†

* `src/main.tsx` Ø±Ø§ Ø·ÙˆØ±ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù† Ú©Ù‡ **BrowserRouter** Ø±ÛŒØ´Ù‡Ù” Ø§Ù¾ Ø±Ø§ Ø¨Ù¾ÛŒÚ†Ø¯:

```tsx
// src/main.tsx
import React from "react";
import ReactDOM from "react-dom/client";
import { BrowserRouter } from "react-router-dom";
import App from "./App";

ReactDOM.createRoot(document.getElementById("root")!).render(
  <BrowserRouter>
    <App />
  </BrowserRouter>
);
```

* `src/App.tsx` Ø±Ø§ Ù…Ø³ÛŒØ±Ù…Ø­ÙˆØ± Ú©Ù† (Layout + Routes):

```tsx
// src/App.tsx
import { Routes, Route } from "react-router-dom";
import Layout from "./components/Layout";
import Home from "./pages/Home";
import Products from "./pages/Products";
import Blog from "./pages/Blog";
import Dashboard from "./pages/Dashboard";
import NotFound from "./pages/NotFound";

export default function App() {
  return (
    <Routes>
      <Route element={<Layout />}>
        <Route index element={<Home />} />
        <Route path="products" element={<Products />} />
        <Route path="blog" element={<Blog />} />
        <Route path="dashboard" element={<Dashboard />} />
        <Route path="*" element={<NotFound />} />
      </Route>
    </Routes>
  );
}
```

* `src/components/Layout.tsx`:

```tsx
// src/components/Layout.tsx
import { Outlet } from "react-router-dom";
import Header from "./Header";
import Footer from "./Footer";

export default function Layout() {
  return (
    <>
      <Header />
      <main dir="rtl"><Outlet /></main>
      <Footer />
    </>
  );
}
```

## 2) Ù‡Ù…Ù‡Ù” Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ø±Ø§ ØªØ¨Ø¯ÛŒÙ„ Ú©Ù† Ø¨Ù‡ Link/NavLink

* Ù‡Ø±Ø¬Ø§ Ù„ÛŒÙ†Ú© Ø¯Ø§Ø®Ù„ÛŒ Ø¯Ø§Ø±ÛŒ (`/`, `/products`, `/blog`, `/dashboard`) Ø§Ø² `Link/NavLink` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†. Ù‡Ø± `<a href="/">` ÛŒØ§ `<a href="#">` Ø¯Ø§Ø®Ù„ÛŒ Ø±Ø§ Ø­Ø°Ù ÛŒØ§ ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†.
* Ø¯Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ `Header.tsx`, `Hero.tsx`, Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ùˆ â€¦ Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ø±Ø§ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù†:

```tsx
// Ø¯Ø±Ø³Øª:
import { Link, NavLink } from "react-router-dom";
<NavLink to="/" end>Ø®Ø§Ù†Ù‡</NavLink>
<NavLink to="/products">Ù…Ø­ØµÙˆÙ„Ø§Øª</NavLink>
<NavLink to="/blog">ÙˆØ¨Ù„Ø§Ú¯</NavLink>
<Link to="/" aria-label="iShop Home"><img src="/logo-iShop.png" alt="iShop"/></Link>

// ØºÙ„Ø· (Ø­Ø°Ù/ØªØ¨Ø¯ÛŒÙ„):
// <a href="/">...</a>
// <a href="#">...</a>
// <a href="/#products">...</a>
```

## 3) Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ Ø³Ú©Ø´Ù† ÛŒÚ© ØµÙØ­Ù‡ (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± URL)

* Ø§Ú¯Ø± Ø¨Ù‡ Ø³Ú©Ø´Ù† Ø¯Ø§Ø®Ù„ÛŒ Ù‡ÙˆÙ… Ù…ÛŒâ€ŒØ±ÙˆÛŒ (Ù…Ø«Ù„ products)ØŒ Ø¨Ù‡â€ŒØ¬Ø§ÛŒ `href="#products"` Ø§Ø² Ø§Ø³Ú©Ø±ÙˆÙ„ Ù†Ø±Ù… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†:

```tsx
// src/lib/scroll.ts
export function scrollToId(id: string) {
  const el = document.getElementById(id);
  if (el) el.scrollIntoView({ behavior: "smooth", block: "start" });
}

// Ø§Ø³ØªÙØ§Ø¯Ù‡:
<button type="button" onClick={() => scrollToId("products-section")}>Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª</button>
```

## 4) ÙØ±Ù…â€ŒÙ‡Ø§ ØµÙØ­Ù‡ Ø±Ø§ Ø±ÛŒÙØ±Ø´ Ù†Ú©Ù†Ù†Ø¯

* ØªÙ…Ø§Ù… ÙØ±Ù…â€ŒÙ‡Ø§ `onSubmit={(e)=>{ e.preventDefault(); ... }}` Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯.
* ØªÙ…Ø§Ù… Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ submit Ù†ÛŒØ³ØªÙ†Ø¯: `type="button"` Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯.
* Ù…Ø«Ø§Ù„ Ø¯Ø± Auth/Search:

```tsx
<form onSubmit={(e)=>{ e.preventDefault(); doLogin(); }}>
  ...
  <button type="submit">ÙˆØ±ÙˆØ¯</button>
</form>

<button type="button" onClick={openCart}>ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</button>
```

## 5) Ù‡Ø± Ø§Ø³Ú©Ø±ÛŒÙ¾Øª/Ù‡Ù†Ø¯Ù„Ø± Ù‚Ø¯ÛŒÙ…ÛŒ Ú©Ù‡ Ù†Ø§ÙˆØ¨Ø±ÛŒ Ø±Ø§ Ø®Ø±Ø§Ø¨ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ø­Ø°Ù Ú©Ù†

* Ø¬Ø³ØªØ¬Ùˆ Ú©Ù† Ùˆ Ù‡Ø±Ú†Ù‡ `onclick=` Ø§ÛŒÙ†â€ŒÙ„Ø§ÛŒÙ†ØŒ `showPage(`ØŒ `location.` ÛŒØ§ `href="#"` Ù‡Ø³Øª Ø§ØµÙ„Ø§Ø­/Ø­Ø°Ù Ú©Ù†:

```bash
grep -R "onclick=" -n src public
grep -R "showPage(" -n .
grep -R 'href="#"' -n src public
grep -R "location\\." -n src
```

**Ø§Ù‚Ø¯Ø§Ù… Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù…ÙˆØ±Ø¯:**

* Ù„ÛŒÙ†Ú© Ø¯Ø§Ø®Ù„ÛŒ â†’ `Link/NavLink`
* Ø§Ú©Ø´Ù† Ø¨Ø¯ÙˆÙ† Ù†Ø§ÙˆØ¨Ø±ÛŒ â†’ `<button type="button" ...>`
* ÙØ§Ù†Ú©Ø´Ù†â€ŒÙ‡Ø§ÛŒ SPA Ù‚Ø¯ÛŒÙ…ÛŒ (Ù…Ø«Ù„ `showPage`) Ø±Ø§ Ø­Ø°Ù Ú©Ù† Ùˆ Ù…Ù†Ø·Ù‚Ø´ Ø±Ø§ Ø¨Ù‡ Router/Ø§Ø³Ú©Ø±ÙˆÙ„ Ù…Ù†ØªÙ‚Ù„ Ú©Ù†.

## 6) Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú©Ø´ index.html (Ø­Ù„ 404 Ú†Ø§Ù†Ú© Ù‚Ø¯ÛŒÙ…ÛŒ)

* `public/index.html` Ø±Ø§ Ø¨Ø§Ø² Ú©Ù† Ùˆ Ø§ÛŒÙ† Ù…ØªØ§Ù‡Ø§ Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù† ØªØ§ `index.html` Ú©Ø´ Ù†Ø´ÙˆØ¯:

```html
<meta http-equiv="Cache-Control" content="no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
```

* ÛŒÚ©â€ŒØ¨Ø§Ø± Ø¨ÛŒÙ„Ø¯ ØªØ§Ø²Ù‡ Ø¨Ú¯ÛŒØ± Ùˆ Ø±ÛŒÙØ±Ø´ Ø³Ø®Øª Ú©Ù†:

```bash
rm -rf dist
npm run build
```

## 7) Ø§Ø¨Ø²Ø§Ø± Ø¯ÛŒØ¨Ø§Ú¯ Ù…Ø³ÛŒØ± (Ù…ÙˆÙ‚ØªÛŒ)

* Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² ØªØºÛŒÛŒØ± Ù…Ø³ÛŒØ± Ú©Ù„Ø§ÛŒÙ†Øªâ€ŒØ³Ø§ÛŒØ¯ØŒ Ø§ÛŒÙ† Ø±Ø§ Ø¨Ù‡ `Layout` Ø§Ø¶Ø§ÙÙ‡ Ú©Ù† Ùˆ Ø¨Ø¹Ø¯ Ø§Ø² ØªØ³Øª Ø­Ø°ÙØ´ Ú©Ù†:

```tsx
// Ø²ÛŒØ± import Ù‡Ø§:
import { useLocation } from "react-router-dom";

function PathDebug() {
  const { pathname } = useLocation();
  return (
    <div style={{position:'fixed',left:8,bottom:8,background:'#000a',color:'#fff',padding:'4px 8px',borderRadius:8,fontSize:12,zIndex:9999}}>
      {pathname}
    </div>
  );
}

// Ø¯Ø± Layout:
<>
  <Header />
  <PathDebug />
  <main dir="rtl"><Outlet /></main>
  <Footer />
</>
```

## 8) Ù¾Ø°ÛŒØ±Ø´ (Acceptance)

* Ú©Ù„ÛŒÚ© Â«Ù…Ø­ØµÙˆÙ„Ø§ØªÂ» â†’ URL Ù…ÛŒâ€ŒØ´ÙˆØ¯ `/products` Ùˆ Ù…Ø­ØªÙˆØ§ÛŒ Products Ø±Ù†Ø¯Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯ (Ø¨Ø¯ÙˆÙ† Ø±ÛŒÙØ±Ø´ Ú©Ø§Ù…Ù„).
* Ú©Ù„ÛŒÚ© Â«ÙˆØ¨Ù„Ø§Ú¯Â» â†’ `/blog` Ø±Ù†Ø¯Ø±.
* CTA Ù‡ÛŒØ±Ùˆ Â«Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§ØªÂ» Ø¯ÛŒÚ¯Ø± Ø¨Ù‡ `/` Ø¨Ø±Ù†Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯.
* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø¨Ø¯/ÙˆØ±ÙˆØ¯ (Ù…ÙˆØ¯Ø§Ù„â€ŒÙ‡Ø§) Ù‡ÛŒÚ†â€ŒÙˆÙ‚Øª ØµÙØ­Ù‡ Ø±Ø§ Ø±ÙØ±Ø´ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.
* Ø±ÙØ±Ø´ Ù…Ø³ØªÙ‚ÛŒÙ… Ø±ÙˆÛŒ `/products` ÛŒØ§ `/blog` Ø¨Ù‡â€ŒØ®Ø§Ø·Ø± `StaticFiles(html=True)` Ø¯Ø±Ø³Øª Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
* Ø¯Ø± DevTools â†’ Network Ù‡ÛŒÚ† Ú©Ù„ÛŒÚ©ÛŒ Ø¨Ø§Ø¹Ø« `GET /` Ù†Ø§Ú¯Ù‡Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.

## 9) Ø§Ø¬Ø±Ø§

* Run = `npm run dev` (Ø¨Ø¯ÙˆÙ† Ø¯Ø³Øªâ€ŒÚ©Ø§Ø±ÛŒ `vite.config.ts`).
* Ø§Ú¯Ø± Ú©Ø´ Ù…Ø±ÙˆØ±Ú¯Ø± Ù…Ø´Ú©Ù„ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯ØŒ Hard Refresh Ø¨Ø²Ù†.

---

**Ù‡Ø¯Ù:** Ù‡Ù…Ù‡Ù” Ù†Ø§ÙˆØ¨Ø±ÛŒâ€ŒÙ‡Ø§ Û±Û°Û°Ùª Ú©Ù„Ø§ÛŒÙ†Øªâ€ŒØ³Ø§ÛŒØ¯ ØªÙˆØ³Ø· React Router Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆÙ†Ø¯Ø› Ù‡ÛŒÚ† `<a href="/">` ÛŒØ§ `href="#"` Ø¨Ø§Ù‚ÛŒ Ù†Ù…Ø§Ù†Ø¯Ø› ÙØ±Ù…â€ŒÙ‡Ø§ preventDefault Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯Ø› Ùˆ Ù‡ÛŒÚ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù‚Ø¯ÛŒÙ…ÛŒ (vanilla) Ù…Ø³ÛŒØ± Ø±Ø§ ØªØºÛŒÛŒØ± Ù†Ø¯Ù‡Ø¯.
