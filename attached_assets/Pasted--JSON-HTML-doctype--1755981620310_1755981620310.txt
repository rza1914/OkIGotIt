Ø§ÛŒÙ† Ø®Ø·Ø§ ÛŒØ¹Ù†ÛŒ Ø¯Ø§Ø±ÛŒ Ø§Ø² ÛŒÙ‡ Ø¢Ø¯Ø±Ø³ÛŒ Â«JSONÂ» Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒØŒ ÙˆÙ„ÛŒ Ø³Ø±ÙˆØ± Ø¨Ù‡Øª Â«HTML (Ø´Ø±ÙˆØ¹ Ø¨Ø§ \<!doctypeâ€¦)Â» Ø¯Ø§Ø¯Ù‡. Ø³Ù‡ Ø³Ù†Ø§Ø±ÛŒÙˆÛŒ Ø±Ø§ÛŒØ¬:

1. Ø¯Ø§Ø±ÛŒ `/app-config.json` Ø±Ùˆ Ù…ÛŒâ€ŒØ®ÙˆÙ†ÛŒ ÙˆÙ„ÛŒ Ø³Ø±ÙˆØ± Ø¨Ù‡â€ŒØ¬Ø§Ø´ `index.html` Ø¯Ø§Ø¯Ù‡ (ÙØ§ÛŒÙ„ ÙˆØ§Ù‚Ø¹Ø§Ù‹ Ø³Ø±Ùˆ Ù†Ù…ÛŒâ€ŒØ´Ù‡).
2. Ø¯Ø§Ø±ÛŒ Ø¨Ù‡ `/api/v1/...` Ù…ÛŒâ€ŒØ²Ù†ÛŒ ÙˆÙ„ÛŒ Ú†Ù†ÛŒÙ† APIâ€ŒØ§ÛŒ Ù†Ø¯Ø§Ø±ÛŒØŒ Ùˆ Ø³Ø±ÙˆØ± Ø¨Ø±Ø§ÛŒ Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ù†Ø§Ø´Ù†Ø§Ø®ØªÙ‡ `index.html` Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯ÙˆÙ†Ù‡.
3. Ø¨ÛŒÙ„Ø¯ Ù‚Ø¯ÛŒÙ…ÛŒ/Ù†Ø§Ù‚ØµÙ‡ Ùˆ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø¯Ø§Ø®Ù„ `dist/` Ù†ÛŒØ³ØªÙ†.

Ø¨Ø±Ø§ÛŒ Ø±ÙØ¹ Ù‚Ø·Ø¹ÛŒØŒ Ø§ÛŒÙ† 4 Ù…Ø±Ø­Ù„Ù‡ Ø±Ùˆ Ø¯Ù‚ÛŒÙ‚ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯Ù‡:

---

## 1) FastAPI Ø±Ùˆ Ø·ÙˆØ±ÛŒ ØªÙ†Ø¸ÛŒÙ… Ú©Ù† Ú©Ù‡ Ú©Ù„ Ø±ÛŒØ´Ù‡Ù” `dist/` Ø±Ùˆ Ø³Ø±Ùˆ Ú©Ù†Ù‡ (Ù†Ù‡ ÙÙ‚Ø· `/assets`)

Ø§Ù„Ø§Ù† Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹ ÙÙ‚Ø· `/assets` Ø±Ùˆ mount Ú©Ø±Ø¯ÛŒ Ùˆ Ø¨Ø±Ø§ÛŒ Ø¨Ù‚ÛŒÙ‡Ù” Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ catch-all Ú¯Ø°Ø§Ø´ØªÛŒ Ú©Ù‡ `index.html` Ø¨Ø±Ú¯Ø±Ø¯ÙˆÙ†Ù‡Ø› Ù†ØªÛŒØ¬Ù‡â€ŒØ§Ø´ Ø§ÛŒÙ† Ù…ÛŒâ€ŒØ´Ù‡ Ú©Ù‡ `/app-config.json` Ù‡Ù… Ø¨Ø¯Ù„ Ø¨Ù‡ `index.html` Ù…ÛŒâ€ŒØ´Ù‡. Ø§ÛŒÙ† Ù†Ø³Ø®Ù‡ Ø±Ùˆ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù†:

```py
# app/main.py
import os
from fastapi import FastAPI
from fastapi.staticfiles import StaticFiles
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI()

# --- API Ù‡Ø§ Ø§ÛŒÙ†Ø¬Ø§Ø³Øª (Ù†Ù…ÙˆÙ†Ù‡) ---
@app.get("/api/v1/health")
def health():
    return {"ok": True}

# Dev CORS Ø¨Ø§Ø²Ø› Ø¯Ø± Ù¾Ø±ÙˆØ¯Ø§Ú©Ø´Ù† Ù…Ø­Ø¯ÙˆØ¯ Ú©Ù†
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"], allow_methods=["*"], allow_headers=["*"],
)

# ğŸ‘‡ Ù…Ù‡Ù…: Ú©Ù„ dist Ø±Ø§ Ø¯Ø± Ø±ÛŒØ´Ù‡ Ø³ÙØ±Ùˆ Ú©Ù† ØªØ§ /app-config.json Ùˆ Ø¨Ù‚ÛŒÙ‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ù…Ø³ØªÙ‚ÛŒÙ… Ø³Ø±Ùˆ Ø´ÙˆÙ†Ø¯
if os.path.isdir("dist"):
    app.mount("/", StaticFiles(directory="dist", html=True), name="spa")

# âš ï¸ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…: Ø§Ú¯Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ú†Ù†ÛŒÙ† Ú†ÛŒØ²ÛŒ Ø¯Ø§Ø´ØªÛŒ:
# @app.get("/{full_path:path}") -> index.html
# Ø¢Ù† Ø±Ø§ Ø­Ø°Ù Ú©Ù†. Ú†ÙˆÙ† mount Ø¨Ø§Ù„Ø§ Ø®ÙˆØ¯Ø´ index.html Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ SPA Ù‡Ù†Ø¯Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
# Ùˆ Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ù…Ø«Ù„ /app-config.json Ø¨Ù‡â€ŒØµÙˆØ±Øª JSON Ø³Ø±Ùˆ Ø´ÙˆÙ†Ø¯.
```

> ØªØ±ØªÛŒØ¨ Ù…Ù‡Ù…Ù‡: Ø§ÙˆÙ„ Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ `/api/...` Ø±Ùˆ ØªØ¹Ø±ÛŒÙ Ú©Ù†ØŒ Ø¨Ø¹Ø¯ `app.mount("/")` Ø±Ùˆ Ø¨Ø°Ø§Ø±.

---

## 2) Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¨ÛŒÙ„Ø¯ Ø¨Ú¯ÛŒØ± ØªØ§ `app-config.json` Ø¨Ø±Ù‡ Ø¯Ø§Ø®Ù„ `dist/`

`public/app-config.json` ÙÙ‚Ø· Ø¨Ø§ Ø¨ÛŒÙ„Ø¯ Ù…ÛŒØ±Ù‡ Ø¯Ø§Ø®Ù„ `dist/`. Ø§Ú¯Ø± ØªØ§Ø²Ù‡ Ø§Ø¶Ø§ÙÙ‡â€ŒØ´ Ú©Ø±Ø¯ÛŒ ÙˆÙ„ÛŒ Ø¨ÛŒÙ„Ø¯ Ù†Ú¯Ø±ÙØªÛŒØŒ Ø³Ø±ÙˆØ± Ù†Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ù¾ÛŒØ¯Ø§Ø´ Ú©Ù†Ù‡ Ùˆ Ø¨Ù‡â€ŒØ¬Ø§Ø´ `index.html` Ù…ÛŒâ€ŒØ¯Ù‡.

```bash
rm -rf dist
npm run build
# Ø­Ø§Ù„Ø§ Ø§ÛŒÙ† Ø¨Ø§ÛŒØ¯ true Ø¨Ø§Ø´Ù‡:
ls dist/app-config.json
```

---

## 3) Loader ÙØ±Ø§Ù†Øª Ø±Ùˆ Ø¶Ø¯Ø®Ø·Ø§ Ú©Ù† (Content-Type Ø±Ø§ Ú†Ú© Ú©Ù†)

Ø§Ú¯Ø± Ø¨Ù‡ Ù‡Ø± Ø¯Ù„ÛŒÙ„ Ø¨Ø§Ø² Ù‡Ù… Ø¨Ù‡â€ŒØ¬Ø§ÛŒ JSONØŒ HTML Ø¨ÛŒØ§Ø¯ØŒ Ø¨Ù‡â€ŒØ¬Ø§ÛŒ Ú©Ø±Ø´ØŒ Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø¯Ù‡:

```ts
// src/lib/runtimeConfig.ts
export async function loadRuntimeConfig() {
  try {
    const r = await fetch('/app-config.json', { cache: 'no-store' });
    const ct = r.headers.get('content-type') || '';
    if (!r.ok || !ct.includes('application/json')) throw new Error('cfg-not-json');
    return await r.json();
  } catch {
    return { API_BASE: '/api/v1' }; // Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø§Ù…Ù†
  }
}
```

Ùˆ Ø­ØªÙ…Ø§Ù‹ Ù‡Ù…Ù‡Ù” ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒâ€ŒÙ‡Ø§ÛŒ API Ø±Ùˆ Ø§Ø² ÛŒÙ‡ Ù‡Ù„Ø³Ù¾Ø± ÙˆØ§Ø­Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†:

```ts
// src/lib/api.ts
let cfg = { API_BASE: '/api/v1' };
export function setRuntimeCfg(c:{API_BASE:string}) { cfg = c; }

export async function api<T>(path:string, opts: RequestInit = {}) {
  const res = await fetch(`${cfg.API_BASE}${path}`, {
    headers: { 'Content-Type':'application/json', ...(opts.headers||{}) },
    ...opts
  });
  const ct = res.headers.get('content-type') || '';
  if (!res.ok) throw new Error(`HTTP ${res.status}`);
  if (!ct.includes('application/json')) throw new Error('Not JSON');
  return res.json() as Promise<T>;
}
```

---

## 4) Ø¯Ù‚ÛŒÙ‚ ØªØ´Ø®ÛŒØµ Ø¨Ø¯Ù‡ Â«ÙÚ†Ù Ø®Ø±Ø§Ø¨Â» Ú©Ø¯ÙˆÙ…Ù‡

Ø¯Ø± DevTools â†’ Network Ø±ÙˆÛŒ Ø±ÛŒÚ©ÙˆØ¦Ø³ØªÙ Fail Ú©Ù„ÛŒÚ© Ú©Ù†:

* Ø§Ú¯Ø± URL = **`/app-config.json`** Ùˆ Status=200 Ùˆ Response Ø¨Ø§ `<!doctype` Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´Ù‡ â†’ Ù…Ø±Ø­Ù„Ù‡ 1 Ùˆ 2 Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‡Ù…ÛŒÙ† Ø±Ùˆ Ø­Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ù‡ (mount Ø±ÛŒØ´Ù‡ + Ø¨ÛŒÙ„Ø¯ Ø¬Ø¯ÛŒØ¯).
* Ø§Ú¯Ø± URL = **`/api/v1/...`** Ùˆ Response `<!doctype` Ù‡Ø³Øª â†’ ÛŒØ¹Ù†ÛŒ Ø§ÙˆÙ† API Ø±Ùˆ Ù†Ø¯Ø§Ø±ÛŒ (ÛŒØ§ Ù…Ø³ÛŒØ± Ø§Ø´ØªØ¨Ø§Ù‡Ù‡). Ø§ÙˆÙ„ ØªÙˆ Ù…Ø±ÙˆØ±Ú¯Ø± Ø¨Ø±Ùˆ Ø¨Ù‡ `/api/v1/health`Ø› Ø§Ú¯Ø± JSON Ø¯ÛŒØ¯ÛŒØŒ ÙˆÙ„ÛŒ `/api/v1/products` 404/HTML Ù…ÛŒâ€ŒØ¯Ù‡ØŒ Ù¾Ø³ Ø¨Ø§ÛŒØ¯ Ø§ÙˆÙ† Ø§Ù†Ø¯Ù¾ÙˆÛŒÙ†Øª Ø±Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒ ÛŒØ§ Ù…Ø³ÛŒØ± ÙØ±Ø§Ù†Øª Ø±Ùˆ Ø§ØµÙ„Ø§Ø­ Ú©Ù†ÛŒ.

Ù†Ù…ÙˆÙ†Ù‡Ù” Ø³Ø§Ø¯Ù‡Ù” Products Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ø³Ø±ÛŒØ¹:

```py
# Ø§Ø¶Ø§ÙÙ‡ Ú©Ù† Ø¯Ø± app/main.py Ù‚Ø¨Ù„ Ø§Ø² mount("/")
@app.get("/api/v1/products")
def products():
    return [
      {"id":1,"name":"Ú©ÛŒÙ Ø±Ø²Ú¯Ù„Ø¯","price":1250000,"image_url":""},
      {"id":2,"name":"Ú©ÙØ´ Ø·Ù„Ø§ÛŒÛŒ","price":2390000,"image_url":""}
    ]
```

---

## Ø§Ú¯Ø± Ù‡Ù†ÙˆØ² Replit Â«Ø¯Ø§Ù…Ù†Ù‡Ù” Ø®Ø§Ù„ÛŒÂ» Ù…ÛŒâ€ŒØ¯Ù‡Ø¯

ÛŒØ¹Ù†ÛŒ Ú©Ø³ÛŒ Ø±ÙˆÛŒ `$PORT` Ú¯ÙˆØ´ Ù†Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. Run Ø¨Ø§ÛŒØ¯ Ø§ÛŒÙ† Ø¨Ø§Ø´Ø¯:

```json
{
  "scripts": {
    "dev": "uvicorn app.main:app --host 0.0.0.0 --port $PORT",
    "build": "vite build"
  }
}
```

* Ø§ÙˆÙ„ `npm run build`ØŒ Ø¨Ø¹Ø¯ Run = `npm run dev`.
* ÙˆÙ‚ØªÛŒ Ù‡Ù…Ù‡â€ŒÚ†ÛŒØ² Ø§ÙˆÚ©ÛŒ Ø´Ø¯ØŒ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø¨Ø±Ú¯Ø±Ø¯ÛŒ Ø¨Ù‡ Ù…Ø¯Ù„ Ù¾Ø§ÛŒØ¯Ø§Ø± Â«ØªÚ©â€ŒÙ¾ÙˆØ±ØªÂ» Ø¨Ø§ ÙˆØ§Ú†:

  ```json
  "dev": "concurrently -k \"vite build --watch\" \"uvicorn app.main:app --host 0.0.0.0 --port $PORT\""
  ```

---

### Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒÙ Ø¹Ù„Øª Ø§Ø±ÙˆØ±

`Unexpected token '<'` ÛŒØ¹Ù†ÛŒ Ù¾Ø§Ø³Ø® JSON Ù†Ø¨ÙˆØ¯ Ùˆ HTML Ø¨Ø±Ú¯Ø´ØªÙ‡. Ø¨Ø§ **mount Ú©Ø±Ø¯Ù† Ú©Ù„ Ø±ÛŒØ´Ù‡Ù” `dist/`** Ùˆ **Ø¨ÛŒÙ„Ø¯ ØªØ§Ø²Ù‡** Ù…Ø´Ú©Ù„ `app-config.json` Ø­Ù„ Ù…ÛŒâ€ŒØ´Ù‡Ø› Ø¨Ø§ **ØªØ¹Ø±ÛŒÙ API ÙˆØ§Ù‚Ø¹ÛŒ** Ù…Ø´Ú©Ù„ `/api/v1/...` Ø­Ù„ Ù…ÛŒâ€ŒØ´Ù‡Ø› Ùˆ Ø¨Ø§ **Ú†Ú© Ú©Ø±Ø¯Ù† content-type Ø¯Ø± Ú©Ù„Ø§ÛŒÙ†Øª** Ø¬Ù„ÙˆÛŒ Ú©Ø±Ø´ Ú¯Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´Ù‡.
