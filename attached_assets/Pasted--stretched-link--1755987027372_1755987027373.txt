Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‡Ù…ÛŒÙ†Ù‡: ÛŒÙ‡ Ø¬Ø§ Ú©Ù„ÛŒÚ©â€ŒÙ‡Ù†Ø¯Ù„Ø±/Ù„ÛŒÙ†Ú© Â«Ø¨Ù†Ø±Â» Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø³Ø±Ø§Ø³Ø±ÛŒ ÛŒØ§ â€œstretched-linkâ€ Ú©Ù„ Ù†Ø§Ø­ÛŒÙ‡Ù” Ù‡Ø¯Ø±/ØµÙØ­Ù‡ Ø±Ùˆ Ù¾ÙˆØ´ÙˆÙ†Ø¯Ù‡ØŒ Ùˆ Ù‡Ø± Ú©Ù„ÛŒÚ©ÛŒ Ø±Ùˆ Â«Ø¨Ù†Ø±Â» Ø­Ø³Ø§Ø¨ Ù…ÛŒâ€ŒÚ©Ù†Ù‡Ø› Ø¹Ù„Ø§ÙˆÙ‡ Ø¨Ø± Ø§ÙˆÙ†ØŒ fetch Ø¨Ù†Ø±Ù‡Ø§ Ù‡Ù… Ù‡Ø± Ø¨Ø§Ø± ØªØ±ÛŒÚ¯Ø± Ù…ÛŒâ€ŒØ´Ù‡. Ø§ÛŒÙ† Â«Ù¾Ø±Ø§Ù…Ù¾Øª Ø³ÙˆÙ¾Ø±â€ŒØ¯ÛŒâ€ŒØªÛŒÙ„Ø¯Â» Ø±Ùˆ Ù‡Ù…ÙˆÙ†â€ŒØ·ÙˆØ± Ú©Ù‡ Ù‡Ø³Øª Ø¨Ù‡ Replit AI Ø¨Ø¯Ù‡ ØªØ§ Ø±ÛŒØ´Ù‡â€ŒØ§ÛŒ Ø¯Ø±Ø³ØªØ´ Ú©Ù†Ù‡ â€” Ø¨Ø¯ÙˆÙ† Ø¯Ø³Øªâ€ŒØ²Ø¯Ù† Ø¨Ù‡ vite.config.ts.

---

# ğŸ§¨ Replit AI â€” Fix â€œeverything is a bannerâ€ (scoped click, no stretched overlay, single fetch)

## Ù‡Ø¯Ù

* Ú©Ù„ÛŒÚ© Ø¨Ù†Ø± ÙÙ‚Ø· ÙˆÙ‚ØªÛŒ Ø­Ø³Ø§Ø¨ Ø´ÙˆØ¯ Ú©Ù‡ Ø±ÙˆÛŒ ÛŒÚ© Ø§Ù„Ù…Ù†Øª Ø¨Ø§ `[data-banner]` Ú©Ù„ÛŒÚ© Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯.
* Ù‡ÛŒÚ† Ù„ÛŒÙ†Ú©/Ø§ÙÙˆØ±Ù„ÙÛŒ Ø¨Ø§ `absolute inset-0` Ø¨ÛŒØ±ÙˆÙ† Ø§Ø² Ø¨Ø§Ú©Ø³ Ø¨Ù†Ø±ØŒ Ù‡Ø¯Ø±/ØµÙØ­Ù‡ Ø±Ø§ Ù†Ù¾ÙˆØ´Ø§Ù†Ø¯.
* Ø¨Ù†Ø±Ù‡Ø§ ÙÙ‚Ø· **ÛŒÚ©â€ŒØ¨Ø§Ø±** fetch Ø´ÙˆÙ†Ø¯ (Ù†Ù‡ Ø¨Ø§ Ù‡Ø± Ø±Ù†Ø¯Ø±/Ú©Ù„ÛŒÚ©).

---

## 1) Ø¬Ù„ÙˆÛŒ Â«Ø¨Ù†Ø±â€ŒÚ©Ù„ÛŒÚ©Ù Ø³Ø±Ø§Ø³Ø±ÛŒÂ» Ø±Ø§ Ø¨Ú¯ÛŒØ±Ø› ÙÙ‚Ø· Ø±ÙˆÛŒ `[data-banner]`

**Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„:** `src/analytics/bannerClicks.ts`

```ts
// ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± Ù†ØµØ¨ Ù…ÛŒâ€ŒØ´ÙˆØ¯
let installed = false;

export function installBannerClickTracker(track: (meta: any)=>void) {
  if (installed) return;
  installed = true;

  document.addEventListener(
    "click",
    (e) => {
      const t = e.target as HTMLElement;
      const bannerEl = t.closest("[data-banner]");
      if (!bannerEl) return; // â¬…ï¸ ÙÙ‚Ø· Ú©Ù„ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ Ø¨Ù†Ø± Ø±Ø§ Ø¨Ú¯ÛŒØ±

      // Ù†Ù…ÙˆÙ†Ù‡â€ŒÛŒ Ù…ØªØ§Ø¯ÛŒØªØ§ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ Ø§Ø² dataset):
      const meta = {
        id: bannerEl.getAttribute("data-banner-id") || undefined,
        pos: bannerEl.getAttribute("data-banner-pos") || undefined,
      };
      track(meta);
    },
    true // capture Ù…Ø´Ú©Ù„ÛŒ Ù†Ø¯Ø§Ø±Ù‡Ø› Ú†ÙˆÙ† ÙÛŒÙ„ØªØ± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
  );
}
```

**Ø§ØªØµØ§Ù„ Ø¯Ø± Ø¨ÙˆØª Ø§Ù¾:** `src/main.tsx`

```ts
import { installBannerClickTracker } from "./analytics/bannerClicks";
// ...
installBannerClickTracker((meta) => {
  // Ø§ÛŒÙ†Ø¬Ø§ ÙÙ‚Ø· Ù„Ø§Ú¯/Ø¢Ù†Ø§Ù„ÛŒØªÛŒÚ©Ø³ Ø¨ÙØ±Ø³Øª
  console.debug("BANNER CLICK", meta);
});
```

> Ø§Ú¯Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ø¬Ø§ÛŒÛŒ `document.addEventListener('click', ...)` Ø¯Ø§Ø´ØªÛŒ Ú©Ù‡ Ø¨Ø¯ÙˆÙ† ÙÛŒÙ„ØªØ± Ù‡Ù…Ù‡â€ŒÚ†ÛŒØ² Ø±Ø§ Ø¨Ù†Ø± ÙØ±Ø¶ Ù…ÛŒâ€ŒÚ©Ø±Ø¯ØŒ Ø¢Ù† Ø±Ø§ Ø­Ø°Ù Ú©Ù† ÛŒØ§ Ù…Ø­Ø¯ÙˆØ¯Ø´ Ú©Ù† Ø¨Ù‡ Ú©Ø¯ Ø¨Ø§Ù„Ø§.

---

## 2) Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ù†Ø§Ø­ÛŒÙ‡Ù” Ú©Ù„ÛŒÚ© Ø¨Ù†Ø± (Ø­Ø°Ù stretched-link Ø§Ø´ØªØ¨Ø§Ù‡ÛŒ)

Ø¯Ø± Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ø¨Ù†Ø± Ø§ØµÙ„ÛŒ (Ù…Ø«Ù„Ø§Ù‹ `src/features/banners/BannerHero.tsx`) Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¨Ø¯Ù‡:

* Ø¸Ø±Ù ÙˆØ§Ù„Ø¯ **Ù†Ø³Ø¨ÛŒ** Ø§Ø³Øª: `className="relative"`
* Ù„ÛŒÙ†Ú©/area Ø¨Ù†Ø± ÙÙ‚Ø· Ø¯Ø± Ù‡Ù…Ø§Ù† Ø¸Ø±Ù Ø§Ø³Øª Ùˆ **Ø§Ø² Ø¢Ù† Ø¨ÛŒØ±ÙˆÙ† Ù†Ù…ÛŒâ€ŒØ²Ù†Ø¯**.
* Ø§Ú¯Ø± Ø§Ø² Ù„ÛŒÙ†Ú© Ù¾ÙˆØ´Ø§Ù†Ù†Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŒ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒØ§Ø´ Ø¨Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡Ù” Ù‡Ù…Ø§Ù† Ø¸Ø±Ù Ø¨Ø§Ø´Ø¯.

```tsx
// Ù‚Ø¨Ù„ (Ù…Ø´Ú©Ù„â€ŒØ³Ø§Ø²): absolute inset-0 Ø±ÙˆÛŒ Ø¸Ø±ÙÛŒ Ú©Ù‡ Ø§Ø±ØªÙØ§Ø¹/Ù…Ø­Ø¯ÙˆØ¯Ù‡â€ŒØ§Ø´ Ø¯Ø±Ø³Øª ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡
// Ù…Ù…Ú©Ù†Ù‡ Ú©Ù„ Ù‡Ø¯Ø± ÛŒØ§ Ø­ØªÛŒ Ú©Ù„ ØµÙØ­Ù‡ Ø±Ùˆ Ø¨Ù¾ÙˆØ´ÙˆÙ†Ù‡!

// Ø¨Ø¹Ø¯ (Ø¯Ø±Ø³Øª):
export default function BannerHero({ link, img, id, pos }) {
  return (
    <div className="relative overflow-hidden rounded-2xl">
      <img src={img} alt="" className="w-full h-64 object-cover" />
      {/* ÙÙ‚Ø· Ù‡Ù…ÛŒÙ† Ø¨Ø§Ú©Ø³ Ø±Ø§ Ù‚Ø§Ø¨Ù„ Ú©Ù„ÛŒÚ© Ú©Ù† */}
      <a
        href={link}
        data-banner
        data-banner-id={id}
        data-banner-pos={pos}
        className="absolute inset-0"
        onClick={(e) => e.stopPropagation()}
      >
        <span className="sr-only">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¨Ù†Ø±</span>
      </a>
    </div>
  );
}
```

> Ø§Ú¯Ø± Ù‡Ù†ÙˆØ² Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ù‡Ø¯Ø± Ø¨Ù‡ /products Ù…ÛŒâ€ŒØ±ÙˆÛŒØŒ ÛŒØ¹Ù†ÛŒ ÛŒÚ© overlay Ø¨Ø§ `absolute inset-0` Ø§Ø² Ø¸Ø±Ù Ø®ÙˆØ¯Ø´ Ø¨ÛŒØ±ÙˆÙ† Ø²Ø¯Ù‡. Ø±ÙˆÛŒ Ø¸Ø±ÙÙ Ø¨Ù†Ø± `relative` Ø¨Ø¯Ù‡ Ùˆ Ø§Ø¨Ø¹Ø§Ø¯/Ø§Ø±ØªÙØ§Ø¹Ø´ Ø±Ø§ Ù…Ø´Ø®Øµ Ú©Ù† (Ù…Ø«Ù„Ø§Ù‹ `h-64`). Ø¨Ø±Ø§ÛŒ Ø§Ø´Ú©Ø§Ù„â€ŒØ²Ø¯Ø§Ø¦ÛŒ Ù…ÙˆÙ‚ØªØ§Ù‹ Ø¨Ú¯Ø°Ø§Ø±:

```css
[data-banner] { outline: 2px solid red; }
```

Ùˆ Ø¨Ø§ Inspect Ù…Ø·Ù…Ø¦Ù† Ø´Ùˆ ÙÙ‚Ø· Ù‡Ù…Ø§Ù† Ù†Ø§Ø­ÛŒÙ‡ Ù‚Ø±Ù…Ø² Ø§Ø³Øª.

---

## 3) Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² refetch Ù…Ú©Ø±Ø± Ø¨Ù†Ø±Ù‡Ø§ (Ú©ÙØ´ Ø³Ø§Ø¯Ù‡)

**Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„:** `src/features/banners/useBanners.ts`

```ts
import { useEffect, useState } from "react";
import { apiClient } from "@/lib/api";

export type Banner = { id: string; img: string; link: string; pos?: string };

let cache: Banner[] | null = null;
let inFlight: Promise<Banner[]> | null = null;

export function useBanners() {
  const [data, setData] = useState<Banner[] | null>(cache);
  const [loading, setLoading] = useState(!cache);
  const [error, setError] = useState<unknown>(null);

  useEffect(() => {
    if (cache) return; // â¬…ï¸ ÙÙ‚Ø· ÛŒÚ©â€ŒØ¨Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒÙ…
    if (!inFlight) {
      inFlight = apiClient.getBanners().then((res) => res as Banner[]);
    }
    setLoading(true);
    inFlight
      .then((b) => { cache = b; setData(b); })
      .catch((e) => setError(e))
      .finally(() => { setLoading(false); inFlight = null; });
  }, []);

  return { banners: data ?? [], loading, error };
}
```

**Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± UI:**

```tsx
import { useBanners } from "@/features/banners/useBanners";

function Home() {
  const { banners, loading } = useBanners();
  // ...
}
```

> Ø§Ú¯Ø± Ø§Ù„Ø§Ù† `/banners` Ø¨Ø§ Ù‡Ø± Ø¨Ø§Ø²/Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù† Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± ÛŒØ§ Ù‡Ø± Ø±Ù†Ø¯Ø± Ù‡Ø¯Ø± Ø¯ÙˆØ¨Ø§Ø±Ù‡ call Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ø§ÛŒÙ† Ú©Ø´ Ø¬Ù„ÙˆÛŒØ´ Ø±Ø§ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯.

---

## 4) Ú¯Ø§Ø±Ø¯ Ú©ÙˆÚ†Ú© Ø¯Ø± Header (failsafe Ù…ÙˆÙ‚Øª)

ØªØ§ ÙˆÙ‚ØªÛŒ Ø±ÛŒØ´Ù‡ Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŒ Ø±ÙˆÛŒ Ù‡Ø¯Ø± Ø¨Ú¯Ø°Ø§Ø± ÙÙ‚Ø· Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ùˆ Ø¨Ø§ `data-allow-nav` Ø§Ø¬Ø§Ø²Ù‡Ù” Ù†Ø§ÙˆØ¨Ø±ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯:

**Header.tsx â€“ Ø¨Ù‡ Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ùˆ attribute Ø¨Ø¯Ù‡:**

```tsx
<nav className="hidden md:flex items-center space-x-reverse space-x-8">
  <Link to="/" data-allow-nav className="...">Ø®Ø§Ù†Ù‡</Link>
  <Link to="/products" data-allow-nav className="...">Ù…Ø­ØµÙˆÙ„Ø§Øª</Link>
  <Link to="/blog" data-allow-nav className="...">ÙˆØ¨Ù„Ø§Ú¯</Link>
</nav>
```

**Ùˆ Ø±ÙˆÛŒ `<header>` Ú¯Ø§Ø±Ø¯ Capture:**

```tsx
const stopHeaderNav = (e: React.SyntheticEvent) => {
  const t = e.target as HTMLElement;
  if (t.closest("[data-allow-nav]")) return; // ÙÙ‚Ø· Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø¬Ø§Ø²
  if (t.closest("[data-banner]")) return;    // Ø®ÙˆØ¯ Ø¨Ù†Ø± Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø§Ø±Ø¯
  e.preventDefault();
  e.stopPropagation();
};

<header
  className="bg-white shadow-sm border-b border-gray-100"
  onPointerDownCapture={stopHeaderNav}
  onClickCapture={stopHeaderNav}
  onKeyDownCapture={(e) => {
    if (e.key === "Enter" || e.key === " ") stopHeaderNav(e);
  }}
>
```

---

## 5) Ø¬Ø³Øªâ€ŒÙˆØ¬ÙˆÛŒ Ø¹Ù„Øª Ø§ØµÙ„ÛŒ (Û±Û° Ø«Ø§Ù†ÛŒÙ‡)

Ø¯Ø± ØªØ±Ù…ÛŒÙ†Ø§Ù„ Replit Ø§Ø¬Ø±Ø§ Ú©Ù† Ùˆ Ù…ÙˆØ§Ø±Ø¯ Ø±Ø§ Ø§ØµÙ„Ø§Ø­/Ø­Ø°Ù Ú©Ù†:

```bash
# Ù‡Ø± Ú©Ø¯ÛŒ Ú©Ù‡ Ø¨Ù‡ /products Ù†Ø§ÙˆØ¨Ø±ÛŒ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
grep -R "navigate('/products'" -n src || true
grep -R 'to="/products"' -n src | grep -v Header.tsx || true

# Ú©Ù„ÛŒÚ© Ø³Ø±Ø§Ø³Ø±ÛŒ/Ú¯Ù„ÙˆØ¨Ø§Ù„
grep -R "addEventListener('click'" -n src || true
grep -R "document.addEventListener('click'" -n src || true

# Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù¾ÙˆØ´Ø§Ù†Ù†Ø¯Ù‡â€ŒÛŒ ØªÙ…Ø§Ù…â€ŒØµÙØ­Ù‡
grep -R "absolute[^\\n]*inset-0" -n src || true
```

* Ø§Ú¯Ø± `absolute inset-0` Ø±ÙˆÛŒ Ø¹Ù†ØµØ±ÛŒ Ø§Ø³Øª Ú©Ù‡ parentØ´ `relative` Ù†ÛŒØ³Øª ÛŒØ§ Ø§Ø±ØªÙØ§Ø¹ Ù…Ø´Ø®Øµ Ù†Ø¯Ø§Ø±Ø¯ â†’ parent Ø±Ø§ `relative` Ùˆ Ø§Ø±ØªÙØ§Ø¹ Ø±Ø§ Ù…Ø´Ø®Øµ Ú©Ù†.
* Ù‡Ø± `document.addEventListener('click', ...)` Ú©Ù‡ Ø¨Ø¯ÙˆÙ† ÙÛŒÙ„ØªØ± `[data-banner]` Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ â†’ Ø¨Ù‡ Ú©Ø¯ Ø¨Ø®Ø´ 1 ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†.

---

## Ù¾Ø°ÛŒØ±Ø´

* Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ù‡Ø± Ø¬Ø§ÛŒ Ù‡Ø¯Ø± â†’ Ø¯ÛŒÚ¯Ø± Ø¨Ù‡ `/products` Ù†Ù…ÛŒâ€ŒØ¨Ø±Ø¯ (ÙÙ‚Ø· Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ùˆ).
* Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¨Ù†Ø±Ù‡Ø§ â†’ ÙÙ‚Ø· Ù‡Ù…Ø§Ù† Ú©Ù„ÛŒÚ©â€ŒÙ‡Ø§ track/Ù†Ø§ÙˆØ¨Ø±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
* `/banners` ÙÙ‚Ø· ÛŒÚ©â€ŒØ¨Ø§Ø± fetch Ù…ÛŒâ€ŒØ´ÙˆØ¯ (ÛŒØ§ ØªØ§ refresh Ø¨Ø¹Ø¯ÛŒ).
* Ø¯Ø± DevTools â†’ Elements Ø§Ú¯Ø± `[data-banner] { outline: 2px solid red }` Ø±Ø§ Ù…ÙˆÙ‚Øª Ø¨Ú¯Ø°Ø§Ø±ÛŒØŒ ÙÙ‚Ø· Ù†Ø§Ø­ÛŒÙ‡Ù” Ø¨Ù†Ø± Ù‚Ø±Ù…Ø² Ø§Ø³ØªØŒ Ù†Ù‡ Ú©Ù„ Ù‡Ø¯Ø±/ØµÙØ­Ù‡.

Ø¨Ø§ Ø§ÛŒÙ† Ú©Ø§Ø±Ù‡Ø§ØŒ Â«Ù‡Ù…Ù‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø¨Ù†Ø± Ø­Ø³Ø§Ø¨ Ø´Ø¯Ù†Â» Ø¬Ù…Ø¹ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ fetchÙ‡Ø§ÛŒ Ø¨Ù†Ø± Ù‡Ù… Ù¾Ø§ÛŒØ¯Ø§Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯.
